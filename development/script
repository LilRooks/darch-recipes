#!/bin/bash
. ../common

apt-get install -y build-essential \
    git \
    golang \
    htop \
    tree

# Use the gnome-keyring with git
apt-get install -y libgnome-keyring-dev
make --directory=/usr/share/doc/git/contrib/credential/gnome-keyring
git config --global credential.helper /usr/share/doc/git/contrib/credential/gnome-keyring/git-credential-gnome-keyring

# Install GitKraken
apt install -y libgnome-keyring-common libgnome-keyring-dev
wget https://release.gitkraken.com/linux/gitkraken-amd64-18.04.deb -O /tmp/gitkraken.deb
gdebi -n /tmp/gitkraken.deb
rm /tmp/gitkraken.deb

# Install KeyBase
wget  https://prerelease.keybase.io/keybase_amd64.deb -O /tmp/keybase.deb
gdebi -n /tmp/keybase.deb
rm /tmp/keybase.deb

# Install Docker
mkdir -p /etc/docker
touch /etc/docker/daemon.json
echo "{\"experimental\": true, \"graph\": \"/var/lib/darch/docker\"}" | tee -a /etc/docker/daemon.json
curl -L https://download.docker.com/linux/ubuntu/gpg | apt-key add -
add-apt-repository "deb https://download.docker.com/linux/ubuntu bionic stable"
apt-get install -y docker-ce
systemctl enable docker
usermod -aG docker pknopf