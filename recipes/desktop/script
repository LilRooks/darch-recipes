#!/bin/bash
. ../common

while IFS='' read -r line || [[ -n "$line" ]]; do
    preference_file="/etc/apt/preferences.d/$line.pref"
    echo -e "Package: $line\nPin: release *\nPin-Priority: -1" > $preference_file
done < "./blacklist-packages"

tasksel install ubuntu-desktop

# The gdm service tries to use Wayland for some reason... so disable it.
sed -i '/WaylandEnable/s/^#//g' /etc/gdm3/custom.conf

# Install fusuma so that we can use gestures to switch apps.
apt-get install -y ruby libinput-tools xdotool
gem install fusuma

apt-get install -y gnome-calculator

# Video codecs
sudo apt-get install -y gstreamer1.0-{vaapi,libav} gstreamer1.0-plugins-{bad,good,ugly}

# Install the yaru theme
apt-get install -y sassc gnome-shell-extensions
git clone --branch "19.10.2" --depth 1 https://github.com/ubuntu/yaru.git /tmp/yaru
mkdir /tmp/yaru/build
cd /tmp/yaru/build
meson ..
ninja install
rm -r /tmp/yaru